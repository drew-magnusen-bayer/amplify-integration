// local dev only
// only works with velocity client id

const dependencies = {getToken: require('./getToken')}

const userId = (process.env.USER != null ? process.env.USER.toLowerCase() : undefined) || 'system'

const getLocalDevelopmentHeaders = () =>
    dependencies.getToken().then((token) => {
        if (token) {
            return {
                authorization: `Bearer ${token}`,
                wam_user_id: userId
            }
        } else {
            return {}
        }
    })

module.exports = Object.assign(getLocalDevelopmentHeaders, {dependencies})
