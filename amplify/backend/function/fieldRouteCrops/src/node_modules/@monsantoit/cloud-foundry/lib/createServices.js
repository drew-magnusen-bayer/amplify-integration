// Generated by CoffeeScript 1.10.0
(function() {
  var _;

  _ = require('underscore');

  module.exports = function(env) {
    var e, services, toAliasTuple, userProvided;
    if (env == null) {
      env = process.env;
    }
    userProvided = (function() {
      var error;
      try {
        return JSON.parse(env.VCAP_SERVICES)['user-provided'];
      } catch (error) {
        e = error;
        return [];
      }
    })();
    toAliasTuple = function(credentials) {
      if (credentials.alias) {
        return [credentials.alias, credentials];
      }
    };
    services = _(userProvided).chain().pluck('credentials').compact().map(toAliasTuple).compact().object().value();
    return services;
  };

}).call(this);
