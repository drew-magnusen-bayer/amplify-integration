const Joi = require('joi')

module.exports = {
    forConstructor() {
        return Joi.object().keys({
            sources: Joi.array()
                .items(Joi.func())
                .required(),

            processors: Joi.array()
                .items(Joi.func())
                .required(),

            required: Joi.array()
                .items(Joi.string())
                .required(),

            autoRefresh: Joi.boolean(),
            autoRefreshInterval: Joi.number()
                .integer()
                .min(1),
            verbose: Joi.boolean().required()
        })
    },

    forRequired(values) {
        return Joi.array()
            .items(
                values.map((val) =>
                    Joi.string()
                        .label(val)
                        .required()
                )
            )
            .label('final configuration')
    },

    validate(data, schema) {
        return Joi.validate(data, schema)
    }
}
