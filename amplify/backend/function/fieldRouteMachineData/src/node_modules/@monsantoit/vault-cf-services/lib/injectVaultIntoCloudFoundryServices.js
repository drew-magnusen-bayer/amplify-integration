function injectVaultIntoCloudFoundryServices(vaultUrl, credentials, serviceBindings) {
	const injectVaultIntoObject = require('./injectVaultIntoObject');
	const getVault = require('./getVault');
	const validateAppRoleVaultInfo = require('./validateAppRoleVaultInfo');

	const error = validateAppRoleVaultInfo(vaultUrl, credentials);
	if (error) {
		return Promise.reject(error);
	}
	else {
		return getVault(vaultUrl, credentials).then((vault) => {
			return injectVaultIntoObject(serviceBindings, vault);
		});
	}
}

module.exports = injectVaultIntoCloudFoundryServices;